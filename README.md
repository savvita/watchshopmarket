# Інтернет-магазин наручних годинників

В магазині передбачено чотири режими доступу:
1. **Неавторизований користувач**. В цьому режимі користувач може лише переглядати товари.
2. **Режим звичайного користувача**. Доступний після авторизації. В цьому режимі користувачеві доступні функції:
  -    Перегляд товарів.
  -    Додавання товарів у кошик, редагування та очищення кошика.
  -    Оформлення замовлення та скасування замовлення, яке є активним.
  -    Написання відгуків. Також передбачено редагування та видалення своїх відгуків.
  -    Перегляд та редагування свого профілю, перегляд історії замовлень та залишених відгуків.
3. **Режим менеджера**. Доступ до цього режиму надається адміністратором. Можливості:
  -   Управління товарами: додавання, редагування, зняття з продажу.
  -   Управління окремими характеристиками товару: додавання, редагування видалення.
  -   Перегляд статистики продажів:
      -     за кожним товаром та за кожною окремою характеристикою – дані за поточний рік по місяцях;
      -     за кожною характеристикою – дані за весь час та поточний місяць.
  -  Управління замовленнями.
  -  Модерація відгуків.
  -  Управління акціями: створення, редагування та видалення.
  -  Створення та управління появою слайдів на каруселі на головній сторінці.
4. **Режим адміністратора**. Доступ до цього режиму надається іншим адміністратором. Можливості:
  -  Перегляд зареєстрованих користувачів, управління їх доступом, блокування та розблокування користувачів.
  -  Управління файлами у сховищі, які не використовуються.
  -  Оновлення реєстрів з Нової пошти.
  -  Управління способами доставки та оплати: створення, редагування, видалення.
____________________________

**Авторизація**: логін має бути унікальним.

**Підтвердження email**: вимагається тільки для відновлення паролю. При зміні email необхідно повторно проходити верифікацію.

**Зв’язок:**
1. Користувачеві автоматично надсилаються листи на електронну пошту при:
    - реєстрації;
    - зміні або відновленні паролю;
    - створенні нового замовлення.
2. Для відновлення пароля на пошту відправляється посилання для скидання паролю. Лист відправляється лише на пошту, яка була підтверджена раніше.

**Карусель:**
  -  Відображаються слайди, які були створені менеджером. Якщо до слайду прив’язана акція, то слайд веде на сторінку акції.
  -  Кожен слайд має свій індекс, згідно якого він з’являється у каруселі.
  -  Активних слайдів не може бути більше 5.
  -  Якщо створених слайдів менше, карусель доповнюється статичними слайдами.

**Головна:** відображаються товари з категорії Популярне (не більше 9, з останніх добавлених).

**Header:**
1. Меню формується в залежності від прав користувача.
2. При спробі доступу до сторінки, яка потребує дозволів, користувач без відповідних прав допущений не буде.

**Каталог:** відображаються всі товари, які в продажі.

**Замовлення:**
1. У кожного замовлення є відповідальний менеджер.
2. Тільки відповідальний менеджер може управляти замовленням. 
3. Користувач, який створив замовлення, може скасувати замовлення, якщо воно не було скасовано раніше або виконане.
    
**Відгуки:**
1. Добавляти відгуки може тільки авторизований користувач
2. Перед публікацією проходять модерацію.
3. Після редагування відгук проходить повторну модерацію.
4. Заборонено редагувати видалені відгуки.
5. Рейтинг враховується тільки у коментарів, які пройшли модерацію та не були видалені.

**Нова пошта:** інтегровано перелік населених пунктів та відділень Нової пошти. У адміністратора є можливість оновлювати перелік за допомогою API Нової пошти.

**Акції:**
1. Знижка може бути або на товар конкретного виробника, або на весь товар у магазині.
2. Якщо добавляється акція, яка діє на весь товар, всі інші акції відключаються.
3. Якщо добавляється акція, яка діє на товар конкретного виробника, всі інші акції, пов’язані з цим виробником, відключаються.
4. При додаванні нового товару, який підпадає під вже існуючу акцію, на нього автоматично розповсюджується дія акції. 
5. Знижки, які були вручну встановлені на акційні товари, переписуються і не відновлюються після завершення акції.

**Сховище:**
1. При видаленні зображень товару файли фізично не видаляються.
2. Адміністратор має доступ до переліку таких файлів та за необхідності може їх завантажити.
3. Адміністратор може видалити непотрібні файли.
4. Адміністратор не може видаляти файли, які належать товару або слайду.

____________________________
Фронт реалізовано за допомогою React, бек – ASP.NET

**База даних:**
1. Для взаємодії з базою даних використовується Entity Framework.
2. Більшість даних фактично не видаляється з бази даних, а маркується як видалене.
3. При фактичному видаленні даних, в інших таблицях, які посилаються на видалені дані, встановлюється NULL.
4. Редагування товару/слайду/акції/профілю/тощо: використовується механізм оптимістичного блокування на випадок одночасного редагування.

**GitGub:**
- Фронт: https://github.com/savvita/watchshopmarket
- Бек: https://github.com/savvita/Watch/tree/dev
